% Required for better if statements
\usepackage{etoolbox}

% Required for quantum circuits
\usepackage{tikz}
\usetikzlibrary{quantikz2}

% Definitions
\newenvironment{circuit}
{\begin{quantikz}[column sep=0.3cm, row sep=0.2cm]}
{\end{quantikz}}
\def\circ#1{\begin{circuit}#1\end{circuit}}
\def\eq{\boldsymbol{=}}
\def\Plus{\texttt{+}}
\def\Minus{\texttt{-}}
\newcommand{\sqrtt}[2][]{\ifstrequal{#1}{2}{\sqrt{#2}}{\sqrt[#1]{#2}}}

% Gates
\def\nwires{\qwbundle{n}}
\def\nw{\setwiretype{n}}
\def\qw{\setwiretype{q}}
\def\lket#1{\lstick{\ket{#1}}}
\def\rket#1{\rstick{\ket{#1}}}
\def\H{\gate{H}}
\def\X{\targ{}}
\def\Z{\gate{Z}}
\def\S{\gate{S}}
\newcommand{\C}[1]{\ifstrempty{#1}{\control{}}{\ctrl{#1}}}
\def\T{\gate{T}}
\def\Tdg{\gate{T^\dagger}}
\def\phs#1#2{\gate{\sqrtt[#1]{#2}}}
\def\phsDg#1#2{\gate{\sqrtt[#1]{#2}^\dagger}}
\def\Inc#1{\gate[#1]{\Plus\Plus}}
\def\Dec#1{\gate[#1]{\Minus\Minus}}
\def\Rev#1{\gate[#1]{Rev.}}
\def\MinusEq#1#2{\gate[#1]{\texttt{-=}#2}}
\def\midEq#1{\midstick[#1,brackets=none]{$\eq$}}
\def\Var#1#2{\gate[#1]{#2}\hphantom{\texttt{-=}}\wire[d][#1]{q}}
\def\ghostSqrt{\ghost{\sqrt{Z}}}
\def\ghostSqrtDg{\ghost{\sqrt{Z}^\dagger}}
