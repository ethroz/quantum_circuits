% Document setup
\documentclass[12pt, letterpaper]{article}
\usepackage[total={7in, 8.5in}]{geometry}

% Required for better if statements
\usepackage{xifthen}

% Required for more better if statements
\usepackage{etoolbox}

% Required for quantum circuits
\usepackage{tikz}
\usetikzlibrary{quantikz2}

% Definitions
\newenvironment{circuit}
{\begin{quantikz}[column sep=0.3cm, row sep=0.2cm]}
{\end{quantikz}}
\def\eq{\boldsymbol{=}}
\def\Plus{\texttt{+}}
\def\Minus{\texttt{-}}
\newcommand{\sqrtt}[2][]{\ifstrequal{#1}{2}{\sqrt{#2}}{\sqrt[#1]{#2}}}

% Gates
\def\nwires{\qwbundle{n}}
\def\nw{\setwiretype{n}}
\def\qw{\setwiretype{q}}
\def\qwu{\wire[u]{q}}
\def\H{\gate{H}}
\def\X{\targ{}}
\def\Z{\gate{Z}}
\def\S{\gate{S}}
\newcommand{\C}[1]{\ifstrempty{#1}{\control{}}{\ctrl{#1}}}
\def\T{\gate{T}}
\def\Tdg{\gate{T^\dagger}}
\def\phs#1#2{\gate{\sqrtt[#1]{#2}}}
\def\phsDg#1#2{\gate{\sqrtt[#1]{#2}^\dagger}}
\def\Inc#1{\gate[#1]{\Plus\Plus}}
\def\Dec#1{\gate[#1]{\Minus\Minus}}
\def\Rev#1{\gate[#1]{Rev.}}
\def\MinusEq#1#2{\gate[#1]{\texttt{-=}#2}}
\def\midEq#1{\midstick[#1,brackets=none]{$\eq$}}
\def\Var#1#2{\gate[#1]{#2}\hphantom{\texttt{-=}}}
\def\ghostDg{\ghost{Z^\dagger}}
\def\ghostSqrt{\ghost{\sqrt{Z}}}
\def\ghostSqrtDg{\ghost{\sqrt{Z}^\dagger}}


\begin{document}

\title{Quantum Circuit Identities}
\author{Ethan Rozee}
\date{}
\maketitle

\begin{center}


\bfseries{X using H and Z}
\begin{equation*}\begin{circuit}
&\X&\midEq1&\H&\Z&\H&
\end{circuit}\end{equation*}
\vspace{0.2cm}

\bfseries{Upside-down CNOT using Hadamards}
\begin{equation*}\begin{circuit}
&\X    &\midEq2&\H&\C{1}&\H& \\
&\C{-1}&       &\H&\X   &\H&
\end{circuit}\end{equation*}
\vspace{0.2cm}

\bfseries{SWAP using CNOT}
\begin{equation*}\begin{circuit}
&\swap{1}&\midEq2&\C{1}&\X    &\C{1}&\ghost{Z} \\
&\targX{}&       &\X   &\C{-1}&\X   &\ghost{Z}
\end{circuit}\end{equation*}
\vspace{0.2cm}

\bfseries{Controlled Z Rotations with no controlled Z gates}
\begin{equation*}\begin{circuit}
&\C{1}     &\midEq3&\C{2}                          &          &\C{2}     &\ghost{Z} \\
&\phs{n}{Z}&       &\C{}                           &          &\C{}      & \\
&\nw       &       &\gate{iX}\lstick{\ket0\quad}\qw&\phs{n}{Z}&\gate{-iX}&\rstick{\ket0}
\end{circuit}\end{equation*}
\vspace{0.2cm}

\bfseries{Removing a Control}
\begin{equation*}\begin{circuit}
&\nwires&\C{2}   &\midEq3&\C{1}&            &\nwires&\C{1}&          &\C{2}     &\ghost{Z} \\
&       &\C{}    &       &\X   &\C{1}       &       &\X   &\C{1}     &          & \\
&       &\gate{U}&       &     &\phsDg{2}{U}&       &     &\phs{2}{U}&\phs{2}{U}&
\end{circuit}\end{equation*}
\vspace{0.2cm}

\bfseries{Reducing Z-Axis Controls}
\begin{equation*}\begin{circuit}
&\nwires&\C{2}     &\midEq3&\nwires&\C{2}&             &\C{2}&\C{1}      &\ghost{Z} \\
&       &\C{}      &       &       &\C{} &             &\C{} &\phs{2n}{Z}& \\
&       &\phs{n}{Z}&       &       &\X   &\phsDg{2n}{Z}&\X   &\phs{2n}{Z}&
\end{circuit}\end{equation*}
\vspace{0.2cm}

\bfseries{Clifford+T Toffoli}
\begin{equation*}\begin{circuit}
&  &     &    &\C{2}&  &     &    &\C{2}&    &\C{1}&    &\C{1}&\T& \\
&  &\C{1}&    &     &  &\C{1}&    &     &\Tdg&\X   &\Tdg&\X   &\S& \\
&\H&\X   &\Tdg&\X   &\T&\X   &\Tdg&\X   &\T  &\H   &    &     &  &
\end{circuit}\end{equation*}
\vspace{0.2cm}

\bfseries{Toffoli Depth=8}
\begin{equation*}\begin{circuit}
&\Tdg&\X    &\T   &\X    &\Tdg &\X    &\T  &\X    & \\
&\Tdg&      &\C{1}&\C{-1}&\C{1}&      &    &\C{-1}& \\
&\H  &\C{-2}&\X   &\T    &\X   &\C{-2}&\Tdg&\H    &
\end{circuit}\end{equation*}
\vspace{0.2cm}

\bfseries{Toffoli T-Depth=3}
\begin{equation*}\begin{circuit}
&  &\T&\X    &      &\C{2}&    &\C{1}&\Tdg&      &\C{2}&\X    & \\
&  &\T&\C{-1}&\X    &     &\Tdg&\X   &\Tdg&\X    &     &\C{-1}& \\
&\H&\T&      &\C{-1}&\X   &    &     &\T  &\C{-1}&\X   &\H    &
\end{circuit}\end{equation*}
\vspace{0.2cm}

\bfseries{Multi-Controlled Z as Increments and Phases}
\begin{equation*}\begin{circuit}
&\C{3}     &\midEq4&\Inc4&             &\Dec4&\phs{16}{Z}& \\
&\C{}      &       &     &\phsDg{16}{Z}&     &\phs{16}{Z}& \\
&\C{}      &       &     &\phsDg{8}{Z} &     &\phs{8}{Z} & \\
&\phs{2}{Z}&       &     &\phsDg{4}{Z} &     &\phs{4}{Z} &
\end{circuit}\end{equation*}
\vspace{0.2cm}

\bfseries{Increment Decomposition}
\begin{equation*}\begin{circuit}
&\Inc4&\midEq4&\C{3}&\C{2}&\C{1}&\X&\midEq4&          &          &\C{3}     &            &            &\X&\ghostSqrtDg \\
&     &       &\C{} &\C{} &\X   &  &       &          &\C{2}     &\X        &\C{2}       &            &  & \\
&     &       &\C{} &\X   &     &  &       &\C{1}     &\phs{2}{X}&\phs{2}{X}&\phsDg{2}{X}&\C{1}       &  & \\
&     &       &\X   &     &     &  &       &\phs{2}{X}&\phs{4}{X}&\phs{4}{X}&\phsDg{4}{X}&\phsDg{2}{X}&  &
\end{circuit}\end{equation*}
\vspace{0.2cm}

\bfseries{Decrement Decomposition}
\begin{equation*}\begin{circuit}
&\Dec4&\midEq4&\X&\C{1}&\C{2}&\C{3}&\midEq4&\X&          &          &\C{3}       &            &            &\ghostSqrtDg \\
&     &       &  &\X   &\C{} &\C{} &       &  &          &\C{2}     &\X          &\C{2}       &            & \\
&     &       &  &     &\X   &\C{} &       &  &\C{1}     &\phs{2}{X}&\phsDg{2}{X}&\phsDg{2}{X}&\C{1}       & \\
&     &       &  &     &     &\X   &       &  &\phs{2}{X}&\phs{4}{X}&\phsDg{4}{X}&\phsDg{4}{X}&\phsDg{2}{X}&
\end{circuit}\end{equation*}
\vspace{0.2cm}

\newpage

\bfseries{4-bit QFT}
\begin{equation*}\begin{circuit}
\lstick{LSB}&\Rev4&\H&\phs{2}{Z}&  &\phs{4}{Z}&  &\phs{8}{Z}&  & \\
            &     &  &\C{-1}    &\H&\phs{2}{Z}&  &\phs{4}{Z}&  & \\
            &     &  &          &  &\C{-2}    &\H&\phs{2}{Z}&  & \\
\lstick{MSB}&     &  &          &  &          &  &\C{-3}    &\H&
\end{circuit}\end{equation*}
\vspace{0.2cm}

\bfseries{4-bit Catalytic QFT}
\begin{equation*}\begin{circuit}
             \nw&  &          &           &\lstick{LSB}&\Rev4\qw&\H&\Var{1}{A}    &  &\Var{2}{A}    &  &\Var{3}{A}    &  & \\
             \nw&  &          &           &            &     \qw&  &\C{5}\qwu     &\H&              &  &              &  & \\
             \nw&  &          &           &            &     \qw&  &              &  &\C{3}\qwu     &\H&              &  & \\
             \nw&  &          &           &\lstick{MSB}&     \qw&  &              &  &              &  &\C{1}\qwu     &\H& \\
\lstick{\ket{0}}&\H&\phs{8}{Z}&\ \ldots \ &            &        &  &              &  &              &  &\MinusEq{4}{A}&  & \\
\lstick{\ket{0}}&\H&\phs{4}{Z}&\ \ldots \ &            &        &  &              &  &\MinusEq{3}{A}&  &              &  & \\
\lstick{\ket{0}}&\H&\phs{2}{Z}&\ \ldots \ &            &        &  &\MinusEq{2}{A}&  &              &  &              &  & \\
\lstick{\ket{0}}&\H&\Z        &\ \ldots \ &            &        &  &              &  &              &  &              &  &
\end{circuit}\end{equation*}
\vspace{0.2cm}

\bfseries{Explicit 4-bit Catalytic QFT}
\begin{equation*}\begin{quantikz}[column sep=0.15cm, row sep=0.2cm]
             \nw&  &          &           &\lstick{LSB}&\Rev4\qw&\H&\C{6}&\C{7}&  &     &     &\C{5}&\C{6}&\C{7}&  &     &     &     &     &     &\C{4}&\C{5}&\C{6}&\C{7}&  & \\
             \nw&  &          &           &            &     \qw&  &\C{} &\C{} &\H&\C{5}&\C{6}&     &     &     &  &     &     &\C{4}&\C{5}&\C{6}&     &     &     &     &  & \\
             \nw&  &          &           &            &     \qw&  &     &     &  &\C{} &\C{} &\C{} &\C{} &\C{} &\H&\C{4}&\C{5}&     &     &     &     &     &     &     &  & \\
             \nw&  &          &           &\lstick{MSB}&     \qw&  &     &     &  &     &     &     &     &     &  &\C{} &\C{} &\C{} &\C{} &\C{} &\C{} &\C{} &\C{} &\C{} &\H& \\
\lstick{\ket{0}}&\H&\phs{8}{Z}&\ \ldots \ &            &        &  &     &     &  &     &     &     &     &     &  &     &     &     &     &     &\X   &\C{} &\C{} &\C{} &  & \\
\lstick{\ket{0}}&\H&\phs{4}{Z}&\ \ldots \ &            &        &  &     &     &  &     &     &\X   &\C{} &\C{} &  &     &     &\X   &\C{} &\C{} &     &\X   &\C{} &\C{} &  & \\
\lstick{\ket{0}}&\H&\phs{2}{Z}&\ \ldots \ &            &        &  &\X   &\C{} &  &\X   &\C{} &     &\X   &\C{} &  &\X   &\C{} &     &\X   &\C{} &     &     &\X   &\C{} &  & \\
\lstick{\ket{0}}&\H&\Z        &\ \ldots \ &            &        &  &     &\X   &  &     &\X   &     &     &\X   &  &     &\X   &     &     &\X   &     &     &     &\X   &  &
\end{quantikz}\end{equation*}
\vspace{0.2cm}


\end{center}
\end{document}
